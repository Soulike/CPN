'use strict';function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(c,d){function e(f,g){try{var h=b[f](g),k=h.value}catch(l){return void d(l)}return h.done?void c(k):Promise.resolve(k).then(function(l){e('next',l)},function(l){e('throw',l)})}return e('next')})}}var mapping={};$(_asyncToGenerator(regeneratorRuntime.mark(function a(){var b,c,d,e,f,g;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,getAsync('/cpn/nodes/getAll');case 2:if(b=k.sent.data,c=b.code,d=b.msg,e=b.data,c===CODE.SUCCESS){for(f=e.nodes,g=0;g<f.length;g++)mapping[f[g].trim()]=g;console.log(mapping)}case 7:case'end':return k.stop();}},a,void 0)}))),$(function(){var a=io('http://'+SERVER.DOMAIN+':'+SERVER.PORT);a.on('connect',function(){console.log('socket \u8FDE\u63A5\u6210\u529F')}),a.on('disconnect',function(){console.log('socket \u65AD\u5F00\uFF0C\u8FDB\u884C\u91CD\u8FDE')}),a.on('nodeStatus',function(b){var c,d,e={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var m,l=b[Symbol.iterator]();!(_iteratorNormalCompletion=(m=l.next()).done);_iteratorNormalCompletion=!0){var n=m.value,o=n.startNode,p=n.endNode;c=mapping[o],d=mapping[p],e[c+'-'+d]=!0}}catch(o){_didIteratorError=!0,_iteratorError=o}finally{try{!_iteratorNormalCompletion&&l.return&&l.return()}finally{if(_didIteratorError)throw _iteratorError}}for(var f in console.log(e),e)if(e.hasOwnProperty(f)){var g=f.split('-');Object.is(e[g[1]+'-'+g[0]],void 0)&&delete e[f]}for(var h=0;48>h;h++)for(var k=0;48>k;k++)(1===Math.abs(k-h)||6===Math.abs(k-h))&&(Object.is(e[h+'-'+k],void 0)?$('.line[data-connectnodes='+h+'-'+k+']').removeClass('connected'):!0===e[h+'-'+k]&&$('.line[data-connectnodes='+h+'-'+k+']').addClass('connected'))})});