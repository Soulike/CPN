'use strict';function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(d,f){function g(h,i){try{var j=b[h](i),k=j.value}catch(l){return void f(l)}return j.done?void d(k):Promise.resolve(k).then(function(l){g('next',l)},function(l){g('throw',l)})}return g('next')})}}$(function(){var a=$('.icon'),b=$('#main');a.click(function(){var d=_asyncToGenerator(regeneratorRuntime.mark(function f(g){var h,i,j,k,l,m,n,o,p,q,r,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O;return regeneratorRuntime.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:Q.prev=0,h=$(g.target).attr('data-nodeid'),i=$(g.target).attr('data-devicetype'),j=$(g.target).position(),k=j.top,l=j.left,m=$('<div class="modal" data-fornodeid="'+h+'">\n    <div class="modalHeaderArea">\n        <div class="modalHeader">\u7ED3\u70B9\u4FE1\u606F</div>\n        <div class="modalClose">\xD7</div>\n    </div>\n    <div class="modalBody">\n        <div class="area infoArea"></div>\n        <div class="area formArea"></div>\n    </div>\n    <div class="modalFooter">\n        <div class="btnArea">\n            <button class="btn confirmBtn" data-fornodeid="'+h+'">\u786E\u5B9A</button>\n            <button class="btn cancelBtn">\u53D6\u6D88</button>\n        </div>\n    </div>\n</div>'),n=m.find('.infoArea'),o=m.find('.formArea'),p=DEVICE,q=p.PARAMETERS,r=PARAMETERS_TYPE,t=r.DATA,u=r.CONTROL,v=r.SWITCH,w=q[i],Q.t0=regeneratorRuntime.keys(w);case 11:if((Q.t1=Q.t0()).done){Q.next=29;break}if(x=Q.t1.value,!w.hasOwnProperty(x)){Q.next=27;break}y=w[x],z=y.type,A=y.name,Q.t2=z,Q.next=Q.t2===t?18:Q.t2===u?21:Q.t2===v?24:27;break;case 18:return B=$('<div class="area">\n <span class="label">'+A+'</span>\n <span data-paratype="data" data-paraid="'+x+'"></span>\n </div>'),n.append(B),Q.abrupt('break',27);case 21:return C=$('<label class="control">'+A+'<input data-paratype="control" data-paraid="'+x+'" type="text"></label>'),o.append(C),Q.abrupt('break',27);case 24:return D=$('<div class="radioArea" data-paratype="switch" data-paraid="'+x+'">\n <span class="label">'+A+'</span>\n <label class="radio">\n <input type="radio" value="true" name="'+x+'Radio">\u5F00</label>\n <label class="radio">\n <input type="radio" value="false" name="'+x+'Radio">\u5173</label>\n </div>'),o.append(D),Q.abrupt('break',27);case 27:Q.next=11;break;case 29:return Q.next=31,getNodeInfo(h);case 31:if(E=Q.sent,F=E.code,G=E.msg,H=E.data,F!==CODE.SUCCESS){Q.next=39;break}for(I in H)H.hasOwnProperty(I)&&(J=$('*[data-paraid='+I+']'),0!==J.length&&('div'===J.prop('tagName').toLowerCase()&&'switch'===J.attr('data-paratype')?J.find('input[value='+H[I]+']').prop('checked','true'):'input'===J.prop('tagName').toLowerCase()&&'control'===J.attr('data-paratype')?J.val(H[I]):'span'===J.prop('tagName').toLowerCase()&&'data'===J.attr('data-paratype')&&J.text(H[I])));Q.next=41;break;case 39:return Q.next=41,showNotice(G);case 41:return Q.next=43,getModalMaxPosition();case 43:return K=Q.sent,L=K.minLeft,M=K.minTop,N=K.maxLeft,O=K.maxTop,m.css({display:'none',position:'absolute',left:l<L?L:l>N?N:l,top:k<M?M:k>O?O:k}),b.append(m),m.find('.modalClose').click(function(){var R=_asyncToGenerator(regeneratorRuntime.mark(function S(T){return regeneratorRuntime.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.prev=0,T.preventDefault(),V.next=4,hideModal(m);case 4:V.next=9;break;case 6:V.prev=6,V.t0=V['catch'](0),console.log(V.t0);case 9:case'end':return V.stop();}},S,void 0,[[0,6]])}));return function(){return R.apply(this,arguments)}}()),m.find('.cancelBtn').click(function(){var R=_asyncToGenerator(regeneratorRuntime.mark(function S(T){return regeneratorRuntime.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.prev=0,T.preventDefault(),V.next=4,hideModal(m);case 4:V.next=9;break;case 6:V.prev=6,V.t0=V['catch'](0),console.log(V.t0);case 9:case'end':return V.stop();}},S,void 0,[[0,6]])}));return function(){return R.apply(this,arguments)}}()),m.find('.confirmBtn').click(function(){var R=_asyncToGenerator(regeneratorRuntime.mark(function S(T){var U,V,W,X,Y,Z,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa;return regeneratorRuntime.wrap(function(sa){for(;;)switch(sa.prev=sa.next){case 0:for(sa.prev=0,T.preventDefault(),U=m.find('.formArea'),V=U.find('div[data-paratype=switch]'),W=U.find('input[data-paratype=control]'),X={id:numberMapping[h],data:{}},Y=!0,Z=!1,_=void 0,sa.prev=9,aa=V[Symbol.iterator]();!(Y=(ba=aa.next()).done);Y=!0)ca=ba.value,da=$(ca).find('input[checked=true]'),ea=$(ca).attr('data-paraid'),fa='true'===da.attr('value'),X.data[ea]=fa;sa.next=17;break;case 13:sa.prev=13,sa.t0=sa['catch'](9),Z=!0,_=sa.t0;case 17:sa.prev=17,sa.prev=18,!Y&&aa.return&&aa.return();case 20:if(sa.prev=20,!Z){sa.next=23;break}throw _;case 23:return sa.finish(20);case 24:return sa.finish(17);case 25:for(ga=!0,ha=!1,ia=void 0,sa.prev=28,ja=W[Symbol.iterator]();!(ga=(ka=ja.next()).done);ga=!0)la=ka.value,ma=$(la).attr('data-paraid'),fa=$(la).val(),X.data[ma]=fa;sa.next=36;break;case 32:sa.prev=32,sa.t1=sa['catch'](28),ha=!0,ia=sa.t1;case 36:sa.prev=36,sa.prev=37,!ga&&ja.return&&ja.return();case 39:if(sa.prev=39,!ha){sa.next=42;break}throw ia;case 42:return sa.finish(39);case 43:return sa.finish(36);case 44:return sa.next=46,postAsync('/cpn/nodes/modalSubmit',X);case 46:return na=sa.sent,oa=na.code,pa=na.msg,qa=na.data,sa.next=52,showNotice(pa);case 52:if(oa!==CODE.SUCCESS){sa.next=55;break}return sa.next=55,hideModal(m);case 55:sa.next=62;break;case 57:return sa.prev=57,sa.t2=sa['catch'](0),console.log(sa.t2),sa.next=62,showNotice('\u8BBE\u5907\u4FE1\u606F\u4FEE\u6539\u5931\u8D25').catch(function(ta){console.log(ta)});case 62:case'end':return sa.stop();}},S,void 0,[[0,57],[9,13,17,25],[18,,20,24],[28,32,36,44],[37,,39,43]])}));return function(){return R.apply(this,arguments)}}()),Q.next=55,fadeInAsync(m,150);case 55:Q.next=62;break;case 57:return Q.prev=57,Q.t3=Q['catch'](0),console.log(Q.t3),Q.next=62,showNotice('\u8BBE\u5907\u4FE1\u606F\u83B7\u53D6\u5931\u8D25').catch(function(R){console.log(R)});case 62:case'end':return Q.stop();}},f,void 0,[[0,57]])}));return function(){return d.apply(this,arguments)}}())});