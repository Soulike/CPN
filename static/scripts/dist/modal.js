'use strict';function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(d,f){function g(h,i){try{var j=b[h](i),k=j.value}catch(l){return void f(l)}return j.done?void d(k):Promise.resolve(k).then(function(l){g('next',l)},function(l){g('throw',l)})}return g('next')})}}$(function(){var a=$('.icon'),b=$('#main');a.click(function(){var d=_asyncToGenerator(regeneratorRuntime.mark(function f(g){var h,i,j,k,l,m,n,o,p,q,r,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:R.prev=0,h=$(g.target).attr('data-nodeid'),i=$(g.target).attr('data-devicetype'),j=$(g.target).position(),k=j.top,l=j.left,m=$('<div class="modal" data-fornodeid="'+h+'">\n    <div class="modalHeaderArea">\n        <div class="modalHeader">\u7ED3\u70B9\u4FE1\u606F</div>\n        <div class="modalClose">\xD7</div>\n    </div>\n    <div class="modalBody">\n        <div class="area infoArea"></div>\n        <div class="area formArea"></div>\n    </div>\n    <div class="modalFooter">\n        <div class="btnArea">\n            <button class="btn confirmBtn" data-fornodeid="'+h+'">\u786E\u5B9A</button>\n            <button class="btn cancelBtn">\u53D6\u6D88</button>\n        </div>\n    </div>\n</div>'),n=m.find('.modalBody'),o=m.find('.infoArea'),p=m.find('.formArea'),q=DEVICE,r=q.PARAMETERS,t=PARAMETERS_TYPE,u=t.DATA,v=t.CONTROL,w=t.SWITCH,x=r[i],R.t0=regeneratorRuntime.keys(x);case 12:if((R.t1=R.t0()).done){R.next=31;break}if(y=R.t1.value,!x.hasOwnProperty(y)){R.next=29;break}z=x[y],A=z.type,B=z.name,y=parseInt(y,16)>=parseInt('029A',16)?y.toString():'0'+y,R.t2=A,R.next=R.t2===u?20:R.t2===v?23:R.t2===w?26:29;break;case 20:return C=$('<div class="area">\n <span class="label">'+B+'</span>\n <span data-paratype="data" data-paraid="'+y+'"></span>\n </div>'),o.append(C),R.abrupt('break',29);case 23:return D=$('<label class="control area">'+B+'<input data-paratype="control" data-paraid="'+y+'" type="text"></label>'),p.append(D),R.abrupt('break',29);case 26:return E=$('<div class="radioArea" data-paratype="switch" data-paraid="'+y+'">\n <span class="label">'+B+'</span>\n <label class="radio">\n <input type="radio" value="true" name="'+y+'Radio">\u5F00</label>\n <label class="radio">\n <input type="radio" value="false" name="'+y+'Radio">\u5173</label>\n </div>'),p.append(E),R.abrupt('break',29);case 29:R.next=12;break;case 31:return R.next=33,getNodeInfo(h);case 33:if(F=R.sent,G=F.code,H=F.msg,I=F.data,G!==CODE.SUCCESS){R.next=55;break}for(J in I)I.hasOwnProperty(J)&&(J=J.toUpperCase(),K=n.find('*[data-paraid="'+J+'"]'),0!==K.length&&('div'===K.prop('tagName').toLowerCase()&&'switch'===K.attr('data-paratype')?K.find('input[value='+I[J]+']').prop('checked','true'):'input'===K.prop('tagName').toLowerCase()&&'control'===K.attr('data-paratype')?K.val(I[J]):'span'===K.prop('tagName').toLowerCase()&&'data'===K.attr('data-paratype')&&K.text(I[J])));return R.next=41,getModalMaxPosition();case 41:return L=R.sent,M=L.minLeft,N=L.minTop,O=L.maxLeft,P=L.maxTop,m.css({display:'none',position:'absolute',left:l<M?M:l>O?O:l,top:k<N?N:k>P?P:k}),b.append(m),m.find('.modalClose').click(function(){var S=_asyncToGenerator(regeneratorRuntime.mark(function T(U){return regeneratorRuntime.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.prev=0,U.preventDefault(),W.next=4,hideModal(m);case 4:W.next=9;break;case 6:W.prev=6,W.t0=W['catch'](0),console.log(W.t0);case 9:case'end':return W.stop();}},T,void 0,[[0,6]])}));return function(){return S.apply(this,arguments)}}()),m.find('.cancelBtn').click(function(){var S=_asyncToGenerator(regeneratorRuntime.mark(function T(U){return regeneratorRuntime.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.prev=0,U.preventDefault(),W.next=4,hideModal(m);case 4:W.next=9;break;case 6:W.prev=6,W.t0=W['catch'](0),console.log(W.t0);case 9:case'end':return W.stop();}},T,void 0,[[0,6]])}));return function(){return S.apply(this,arguments)}}()),m.find('.confirmBtn').click(function(){var S=_asyncToGenerator(regeneratorRuntime.mark(function T(U){var V,W,X,Y,Z,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa;return regeneratorRuntime.wrap(function(sa){for(;;)switch(sa.prev=sa.next){case 0:sa.prev=0,U.preventDefault(),V=m.find('.formArea'),W=V.find('div[data-paratype=switch]'),X=V.find('input[data-paratype=control]'),Y={id:getOriginalId(h),data:{}},Z=W,_=Array.isArray(Z),aa=0,Z=_?Z:Z[Symbol.iterator]();case 7:if(!_){sa.next=13;break}if(!(aa>=Z.length)){sa.next=10;break}return sa.abrupt('break',24);case 10:ba=Z[aa++],sa.next=17;break;case 13:if(aa=Z.next(),!aa.done){sa.next=16;break}return sa.abrupt('break',24);case 16:ba=aa.value;case 17:ca=ba,da=$(ca).find('input[checked=true]'),ea=$(ca).attr('data-paraid'),fa='true'===da.attr('value'),Y.data[ea]=fa;case 22:sa.next=7;break;case 24:ga=X,ha=Array.isArray(ga),ia=0,ga=ha?ga:ga[Symbol.iterator]();case 25:if(!ha){sa.next=31;break}if(!(ia>=ga.length)){sa.next=28;break}return sa.abrupt('break',41);case 28:ja=ga[ia++],sa.next=35;break;case 31:if(ia=ga.next(),!ia.done){sa.next=34;break}return sa.abrupt('break',41);case 34:ja=ia.value;case 35:ka=ja,la=$(ka).attr('data-paraid'),ma=$(ka).val(),Y.data[la]=ma;case 39:sa.next=25;break;case 41:return sa.next=43,postAsync('/cpn/node/modify',Y);case 43:return na=sa.sent,oa=na.code,pa=na.msg,qa=na.data,sa.next=49,showNotice(pa,oa===CODE.SUCCESS);case 49:if(oa!==CODE.SUCCESS){sa.next=52;break}return sa.next=52,hideModal(m);case 52:sa.next=59;break;case 54:return sa.prev=54,sa.t0=sa['catch'](0),console.log(sa.t0),sa.next=59,showNotice('\u8BBE\u5907\u4FE1\u606F\u4FEE\u6539\u5931\u8D25').catch(function(ta){console.log(ta)});case 59:case'end':return sa.stop();}},T,void 0,[[0,54]])}));return function(){return S.apply(this,arguments)}}()),R.next=53,fadeInAsync(m,150);case 53:R.next=57;break;case 55:return R.next=57,showNotice(H);case 57:R.next=64;break;case 59:return R.prev=59,R.t3=R['catch'](0),console.log(R.t3),R.next=64,showNotice('\u8BBE\u5907\u4FE1\u606F\u83B7\u53D6\u5931\u8D25').catch(function(S){console.log(S)});case 64:case'end':return R.stop();}},f,void 0,[[0,59]])}));return function(){return d.apply(this,arguments)}}())});