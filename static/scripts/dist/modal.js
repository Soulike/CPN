'use strict';function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(d,f){function g(h,i){try{var j=b[h](i),k=j.value}catch(l){return void f(l)}return j.done?void d(k):Promise.resolve(k).then(function(l){g('next',l)},function(l){g('throw',l)})}return g('next')})}}$(function(){var a=$('.icon'),b=$('#main');a.click(function(){var d=_asyncToGenerator(regeneratorRuntime.mark(function f(g){var h,i,j,k,l,m,n,o,p,q,r,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:R.prev=0,h=$(g.target).attr('data-nodeid'),i=$(g.target).attr('data-devicetype'),j=$(g.target).position(),k=j.top,l=j.left,m=$('<div class="modal" data-fornodeid="'+h+'">\n    <div class="modalHeaderArea">\n        <div class="modalHeader">\u7ED3\u70B9\u4FE1\u606F</div>\n        <div class="modalClose">\xD7</div>\n    </div>\n    <div class="modalBody">\n        <div class="area infoArea"></div>\n        <div class="area formArea"></div>\n    </div>\n    <div class="modalFooter">\n        <div class="btnArea">\n            <button class="btn confirmBtn" data-fornodeid="'+h+'">\u786E\u5B9A</button>\n            <button class="btn cancelBtn">\u53D6\u6D88</button>\n        </div>\n    </div>\n</div>'),n=m.find('.modalBody'),o=m.find('.infoArea'),p=m.find('.formArea'),q=DEVICE,r=q.PARAMETERS,t=PARAMETERS_TYPE,u=t.DATA,v=t.CONTROL,w=t.SWITCH,x=r[i],R.t0=regeneratorRuntime.keys(x);case 12:if((R.t1=R.t0()).done){R.next=31;break}if(y=R.t1.value,!x.hasOwnProperty(y)){R.next=29;break}z=x[y],A=z.type,B=z.name,y=parseInt(y,16)>=parseInt('029A',16)?y.toString():'0'+y,R.t2=A,R.next=R.t2===u?20:R.t2===v?23:R.t2===w?26:29;break;case 20:return C=$('<div class="area">\n <span class="label">'+B+'</span>\n <span data-paratype="data" data-paraid="'+y+'"></span>\n </div>'),o.append(C),R.abrupt('break',29);case 23:return D=$('<label class="control area">'+B+'<input data-paratype="control" data-paraid="'+y+'" type="text"></label>'),p.append(D),R.abrupt('break',29);case 26:return E=$('<div class="radioArea" data-paratype="switch" data-paraid="'+y+'">\n <span class="label">'+B+'</span>\n <label class="radio">\n <input type="radio" value="true" name="'+y+'Radio">\u5F00</label>\n <label class="radio">\n <input type="radio" value="false" name="'+y+'Radio">\u5173</label>\n </div>'),p.append(E),R.abrupt('break',29);case 29:R.next=12;break;case 31:return R.next=33,getNodeInfo(h);case 33:if(F=R.sent,G=F.code,H=F.msg,I=F.data,G!==CODE.SUCCESS){R.next=55;break}for(J in I)I.hasOwnProperty(J)&&(J=J.toUpperCase(),K=n.find('*[data-paraid="'+J+'"]'),0!==K.length&&('div'===K.prop('tagName').toLowerCase()&&'switch'===K.attr('data-paratype')?K.find('input[value='+I[J]+']').prop('checked','true'):'input'===K.prop('tagName').toLowerCase()&&'control'===K.attr('data-paratype')?K.val(I[J]):'span'===K.prop('tagName').toLowerCase()&&'data'===K.attr('data-paratype')&&K.text(I[J])));return R.next=41,getModalMaxPosition();case 41:return L=R.sent,M=L.minLeft,N=L.minTop,O=L.maxLeft,P=L.maxTop,m.css({display:'none',position:'absolute',left:l<M?M:l>O?O:l,top:k<N?N:k>P?P:k}),b.append(m),m.find('.modalClose').click(function(){var S=_asyncToGenerator(regeneratorRuntime.mark(function T(U){return regeneratorRuntime.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.prev=0,U.preventDefault(),W.next=4,hideModal(m);case 4:W.next=9;break;case 6:W.prev=6,W.t0=W['catch'](0),console.log(W.t0);case 9:case'end':return W.stop();}},T,void 0,[[0,6]])}));return function(){return S.apply(this,arguments)}}()),m.find('.cancelBtn').click(function(){var S=_asyncToGenerator(regeneratorRuntime.mark(function T(U){return regeneratorRuntime.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.prev=0,U.preventDefault(),W.next=4,hideModal(m);case 4:W.next=9;break;case 6:W.prev=6,W.t0=W['catch'](0),console.log(W.t0);case 9:case'end':return W.stop();}},T,void 0,[[0,6]])}));return function(){return S.apply(this,arguments)}}()),m.find('.confirmBtn').click(function(){var S=_asyncToGenerator(regeneratorRuntime.mark(function T(U){var V,W,X,Y,Z,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra;return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=ta.next){case 0:for(ta.prev=0,U.preventDefault(),V=m.find('.formArea'),W=V.find('div[data-paratype=switch]'),X=V.find('input[data-paratype=control]'),Y={id:getOriginalId(h),data:{}},Z=!0,_=!1,aa=void 0,ta.prev=9,ba=W[Symbol.iterator]();!(Z=(ca=ba.next()).done);Z=!0)da=ca.value,ea=$(da).find('input[checked=true]'),fa=$(da).attr('data-paraid'),ga='true'===ea.attr('value'),Y.data[fa]=ga;ta.next=17;break;case 13:ta.prev=13,ta.t0=ta['catch'](9),_=!0,aa=ta.t0;case 17:ta.prev=17,ta.prev=18,!Z&&ba.return&&ba.return();case 20:if(ta.prev=20,!_){ta.next=23;break}throw aa;case 23:return ta.finish(20);case 24:return ta.finish(17);case 25:for(ha=!0,ia=!1,ja=void 0,ta.prev=28,ka=X[Symbol.iterator]();!(ha=(la=ka.next()).done);ha=!0)ma=la.value,na=$(ma).attr('data-paraid'),ga=$(ma).val(),Y.data[na]=ga;ta.next=36;break;case 32:ta.prev=32,ta.t1=ta['catch'](28),ia=!0,ja=ta.t1;case 36:ta.prev=36,ta.prev=37,!ha&&ka.return&&ka.return();case 39:if(ta.prev=39,!ia){ta.next=42;break}throw ja;case 42:return ta.finish(39);case 43:return ta.finish(36);case 44:return ta.next=46,postAsync('/cpn/node/modify',Y);case 46:return oa=ta.sent,pa=oa.code,qa=oa.msg,ra=oa.data,ta.next=52,showNotice(qa,pa===CODE.SUCCESS);case 52:if(pa!==CODE.SUCCESS){ta.next=55;break}return ta.next=55,hideModal(m);case 55:ta.next=62;break;case 57:return ta.prev=57,ta.t2=ta['catch'](0),console.log(ta.t2),ta.next=62,showNotice('\u8BBE\u5907\u4FE1\u606F\u4FEE\u6539\u5931\u8D25').catch(function(ua){console.log(ua)});case 62:case'end':return ta.stop();}},T,void 0,[[0,57],[9,13,17,25],[18,,20,24],[28,32,36,44],[37,,39,43]])}));return function(){return S.apply(this,arguments)}}()),R.next=53,fadeInAsync(m,150);case 53:R.next=57;break;case 55:return R.next=57,showNotice(H);case 57:R.next=64;break;case 59:return R.prev=59,R.t3=R['catch'](0),console.log(R.t3),R.next=64,showNotice('\u8BBE\u5907\u4FE1\u606F\u83B7\u53D6\u5931\u8D25').catch(function(S){console.log(S)});case 64:case'end':return R.stop();}},f,void 0,[[0,59]])}));return function(){return d.apply(this,arguments)}}())});