'use strict';function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(d,f){function g(h,i){try{var j=b[h](i),k=j.value}catch(l){return void f(l)}return j.done?void d(k):Promise.resolve(k).then(function(l){g('next',l)},function(l){g('throw',l)})}return g('next')})}}$(function(){var a=$('.icon'),b=$('#main');a.click(function(){var d=_asyncToGenerator(regeneratorRuntime.mark(function f(g){var h,i,j,k,l,m,n,o,p,q,r,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:R.prev=0,h=$(g.target).attr('data-nodeId'),i=$(g.target).attr('data-deviceType'),j=$(g.target).position(),k=j.top,l=j.left,m=$('<div class="modal" data-forNodeId="'+h+'">\n    <div class="modalHeaderArea">\n        <div class="modalHeader">\u7ED3\u70B9\u4FE1\u606F</div>\n        <div class="modalClose">\xD7</div>\n    </div>\n    <div class="modalBody">\n        <div class="area infoArea"></div>\n        <div class="area formArea"></div>\n    </div>\n    <div class="modalFooter">\n        <div class="btnArea">\n            <button class="btn confirmBtn" data-forNodeId="'+h+'">\u786E\u5B9A</button>\n            <button class="btn cancelBtn">\u53D6\u6D88</button>\n        </div>\n    </div>\n</div>'),n=m.find('.modalBody'),o=m.find('.infoArea'),p=m.find('.formArea'),q=DEVICE,r=q.PARAMETERS,t=PARAMETERS_TYPE,u=t.DATA,v=t.CONTROL,w=t.SWITCH,x=r[i],R.t0=regeneratorRuntime.keys(x);case 12:if((R.t1=R.t0()).done){R.next=31;break}if(y=R.t1.value,!x.hasOwnProperty(y)){R.next=29;break}z=x[y],A=z.type,B=z.name,y='0'===y.toString()[0]?y.toString():'0'+y,R.t2=A,R.next=R.t2===u?20:R.t2===v?23:R.t2===w?26:29;break;case 20:return C=$('<div class="area">\n <span class="label">'+B+'</span>\n <span data-paraType="data" data-paraId="'+y+'"></span>\n </div>'),o.append(C),R.abrupt('break',29);case 23:return D=$('<label class="control area">'+B+'<input data-paraType="control" data-paraId="'+y+'" type="text"></label>'),p.append(D),R.abrupt('break',29);case 26:return E=$('<div class="radioArea" data-paraType="switch" data-paraId="'+y+'">\n <span class="label">'+B+'</span>\n <label class="radio">\n <input type="radio" value="true" name="'+y+'Radio">\u5F00</label>\n <label class="radio">\n <input type="radio" value="false" name="'+y+'Radio">\u5173</label>\n </div>'),p.append(E),R.abrupt('break',29);case 29:R.next=12;break;case 31:return R.next=33,getNodeInfo(h);case 33:if(F=R.sent,G=F.code,H=F.msg,I=F.data,G!==CODE.SUCCESS){R.next=55;break}for(J in I)I.hasOwnProperty(J)&&(J=J.trim().toUpperCase(),K=n.find('*[data-paraId="'+J+'"]'),0!==K.length&&('div'===K.prop('tagName').toLowerCase()&&'switch'===K.attr('data-paraType')?K.find('input[value='+I[J]+']').prop('checked','true'):'input'===K.prop('tagName').toLowerCase()&&'control'===K.attr('data-paraType')?K.val(I[J]):'span'===K.prop('tagName').toLowerCase()&&'data'===K.attr('data-paraType')&&K.text(I[J])));return R.next=41,getModalMaxPosition();case 41:return L=R.sent,M=L.minLeft,N=L.minTop,O=L.maxLeft,P=L.maxTop,m.css({display:'none',position:'absolute',left:l<M?M:l>O?O:l,top:k<N?N:k>P?P:k}),b.append(m),m.find('.modalClose').click(function(){var S=_asyncToGenerator(regeneratorRuntime.mark(function T(U){return regeneratorRuntime.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.prev=0,U.preventDefault(),W.next=4,hideModal(m);case 4:W.next=9;break;case 6:W.prev=6,W.t0=W['catch'](0),console.log(W.t0);case 9:case'end':return W.stop();}},T,void 0,[[0,6]])}));return function(){return S.apply(this,arguments)}}()),m.find('.cancelBtn').click(function(){var S=_asyncToGenerator(regeneratorRuntime.mark(function T(U){return regeneratorRuntime.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.prev=0,U.preventDefault(),W.next=4,hideModal(m);case 4:W.next=9;break;case 6:W.prev=6,W.t0=W['catch'](0),console.log(W.t0);case 9:case'end':return W.stop();}},T,void 0,[[0,6]])}));return function(){return S.apply(this,arguments)}}()),m.find('.confirmBtn').click(function(){var S=_asyncToGenerator(regeneratorRuntime.mark(function T(U){var V,W,X,Y,Z,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa;return regeneratorRuntime.wrap(function(ra){for(;;)switch(ra.prev=ra.next){case 0:for(ra.prev=0,U.preventDefault(),V=m.find('.formArea'),W=V.find('div[data-paraType=switch]'),X=V.find('input[data-paraType=control]'),Y={id:getOriginalId(h),data:{}},Z=!0,_=!1,aa=void 0,ra.prev=9,ba=W[Symbol.iterator]();!(Z=(ca=ba.next()).done);Z=!0)da=ca.value,ea=$(da).find('input[checked=true]'),fa=$(da).attr('data-paraId'),Y.data[fa]='true'===ea.attr('value');ra.next=17;break;case 13:ra.prev=13,ra.t0=ra['catch'](9),_=!0,aa=ra.t0;case 17:ra.prev=17,ra.prev=18,!Z&&ba.return&&ba.return();case 20:if(ra.prev=20,!_){ra.next=23;break}throw aa;case 23:return ra.finish(20);case 24:return ra.finish(17);case 25:for(ga=!0,ha=!1,ia=void 0,ra.prev=28,ja=X[Symbol.iterator]();!(ga=(ka=ja.next()).done);ga=!0)la=ka.value,ma=$(la).attr('data-paraId'),Y.data[ma]=$(la).val();ra.next=36;break;case 32:ra.prev=32,ra.t1=ra['catch'](28),ha=!0,ia=ra.t1;case 36:ra.prev=36,ra.prev=37,!ga&&ja.return&&ja.return();case 39:if(ra.prev=39,!ha){ra.next=42;break}throw ia;case 42:return ra.finish(39);case 43:return ra.finish(36);case 44:return ra.next=46,postAsync('/cpn/node/modify',Y);case 46:return na=ra.sent,oa=na.code,pa=na.msg,ra.next=51,showNotice(pa.trim(),oa===CODE.SUCCESS);case 51:if(oa!==CODE.SUCCESS){ra.next=54;break}return ra.next=54,hideModal(m);case 54:ra.next=61;break;case 56:return ra.prev=56,ra.t2=ra['catch'](0),console.log(ra.t2),ra.next=61,showNotice('\u8BBE\u5907\u4FE1\u606F\u4FEE\u6539\u5931\u8D25').catch(function(sa){console.log(sa)});case 61:case'end':return ra.stop();}},T,void 0,[[0,56],[9,13,17,25],[18,,20,24],[28,32,36,44],[37,,39,43]])}));return function(){return S.apply(this,arguments)}}()),R.next=53,fadeInAsync(m,150);case 53:R.next=57;break;case 55:return R.next=57,showNotice(H.trim());case 57:R.next=64;break;case 59:return R.prev=59,R.t3=R['catch'](0),console.log(R.t3),R.next=64,showNotice('\u8BBE\u5907\u4FE1\u606F\u83B7\u53D6\u5931\u8D25').catch(function(S){console.log(S)});case 64:case'end':return R.stop();}},f,void 0,[[0,59]])}));return function(){return d.apply(this,arguments)}}())});